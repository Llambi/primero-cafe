---
import Layout from "@layouts/Layout.astro";
import CoffeeMenus from "@data/CoffeMenus.json";
import CoffeeProduct from "@components/CoffeProduct.astro";
import CoffeeSection from "@components/CoffeeSection.astro";

export function getStaticPaths() {
    return CoffeeMenus.map(({ title }) => ({
        params: { menu: title.toLowerCase() },
    }));
}

const { menu } = Astro.params;
const { title, subtitle, products } = CoffeeMenus.find(
    ({ title }) => title.toLowerCase() === menu
);
---

<Layout title="Primero cafe: Carta">
    <CoffeeSection title={title} subtitle={subtitle}>
        {products.map((product) => <CoffeeProduct {...product} />)}
    </CoffeeSection>
</Layout>
